create table user_table(
                           id integer primary key generated by default as identity,
                           first_name varchar NOT NULL ,
                           last_name varchar not null ,
                           username varchar not null unique ,
                           password varchar not null ,
                           isActive boolean default false,
                           dtype varchar
);

create table trainee(
                        trainee_id integer primary key generated by default as identity,
                        date_of_birth date,
                        address varchar,
                        user_id integer REFERENCES user_table (id) ON DELETE cascade
);

create table trainer(
                        trainer_id integer primary key generated by default as identity,
                        specialization integer REFERENCES training_type (id) ON DELETE set null,
                        user_id integer REFERENCES user_table (id) ON DELETE cascade
);

create table trainee_trainer
(
    trainee_id integer not null
        constraint trainee_trainer_trainee_id_fkey
            references trainee(trainee_id) ON DELETE cascade,
    trainer_id integer not null
        constraint trainee_trainer_trainer_id_fkey
            references trainer(trainer_id) on delete cascade,
    constraint trainee_trainer_pkey
        primary key (trainee_id, trainer_id)

);



create table training_type(
                              id integer primary key generated by default as identity,
                              training_type_name varchar not null
);

create table training(
                         id integer primary key generated by default as identity,
                         trainee_id integer REFERENCES trainee (trainee_id) ON DELETE cascade ,
                         trainer_id integer REFERENCES trainer (trainer_id) ON DELETE cascade ,
                         training_name varchar not null,
                         training_type_id integer REFERENCES training_type (id) ON DELETE SET NULL,
                         training_date timestamp not null ,
                         training_duration integer not null
);